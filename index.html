<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Legal Age: Spicy Confession</title>
  <style>
    body {
      background: radial-gradient(circle at top left, #2c001e, #000);
      color: #fff;
      font-family: 'Segoe UI', sans-serif;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      margin: 0;
    }
    .container {
      width: 90%;
      max-width: 600px;
      padding: 2rem;
      background: rgba(27, 27, 27, 0.95);
      border-radius: 25px;
      box-shadow: 0 0 35px #ff1493aa;
      backdrop-filter: blur(6px);
      overflow-y: auto;
      max-height: 95vh;
    }
    .question {
      margin-bottom: 1.5rem;
      font-size: 1.4rem;
    }
    .answers, .input-block {
      display: flex;
      flex-direction: column;
      gap: 1rem;
    }
    button, input[type=range] {
      font-size: 1rem;
      border-radius: 12px;
      border: none;
      padding: 0.9rem;
    }
    .answer-btn {
      background: linear-gradient(to right, #ff0066, #ff3399);
      color: #fff;
      cursor: pointer;
      box-shadow: 0 0 10px #ff3399aa;
      transition: transform 0.3s, box-shadow 0.3s;
    }
    .answer-btn:hover {
      transform: scale(1.05);
      box-shadow: 0 0 18px #ff66cc;
    }
    .range-label {
      text-align: center;
      font-size: 1.2rem;
      color: #ff66cc;
    }
  </style>
</head>
<body>
  <div class="container" id="quiz-container"></div>
  <script>
    const state = { stage: 'q1', age: 18, branch: null, choiceIndex: null };
    const container = document.getElementById('quiz-container');

    // Q2 categories for legal age (>14)
    const q2Data = {
      q2_14_17: {
        text: 'Ages 14–17: Who was your first partner?',
        answers: ['Close friend', 'Older partner', 'New crush', 'Casual fling', 'Stranger']
      },
      q2_18_21: {
        text: 'Ages 18–21: Was it planned or spontaneous?',
        answers: ['Fully planned', 'Mostly planned', 'Spontaneous', 'Chance encounter', 'Don’t recall']
      },
      q2_22_25: {
        text: 'Ages 22–25: How did it shape your intimacy views?',
        answers: ['Deepened trust', 'Raised doubts', 'Mostly physical', 'Eye-opener', 'No change']
      },
      q2_above25: {
        text: 'Above 25: What motivated the timing?',
        answers: ['Curiosity', 'Love', 'Career focus', 'Cultural reasons', 'Other']
      }
    };

    // Q3 follow-ups for each branch answer index
    const q3Data = {
      'q2_14_17_0': {
        text: 'With a close friend, did boundaries feel clear?',
        answers: ['Yes, clear', 'Some confusion', 'Blurred lines', 'Complicated', 'Other']
      },
      'q2_14_17_1': {
        text: 'Did the age gap feel significant?',
        answers: ['Very', 'Somewhat', 'Minor', 'Not at all', 'Unsure']
      },
      'q2_14_17_2': {
        text: 'Did crush dynamics affect consent?',
        answers: ['Yes', 'No', 'Mixed', 'Unsure', 'Other']
      },
      'q2_14_17_3': {
        text: 'Was it purely casual or did feelings linger?',
        answers: ['Purely casual', 'Some emotion', 'Lingering feelings', 'Regret', 'Other']
      },
      'q2_14_17_4': {
        text: 'How safe did you feel with a stranger?',
        answers: ['Very safe', 'Somewhat safe', 'Unsafe', 'Fearful', 'Other']
      },
      'q2_18_21_0': {
        text: 'What planning went into it?',
        answers: ['Talked a lot', 'Some planning', 'Minimal', 'Spur-of-moment', 'Other']
      },
      'q2_18_21_1': {
        text: 'Why mostly planned?',
        answers: ['Comfort', 'Desire', 'Respect', 'Other', 'Not sure']
      },
      'q2_18_21_2': {
        text: 'What sparked spontaneity?',
        answers: ['Passion', 'Opportunity', 'Alcohol', 'Peer influence', 'Other']
      },
      'q2_18_21_3': {
        text: 'Describe that chance encounter:',
        answers: ['Unexpected', 'Exciting', 'Awkward', 'Regrettable', 'Other']
      },
      'q2_18_21_4': {
        text: 'Why recall is hazy?',
        answers: ['Nervousness', 'Substance', 'Time lapse', 'Privacy', 'Other']
      },
      'q2_22_25_0': {
        text: 'Which trust deepened most?',
        answers: ['Emotional', 'Physical', 'Mental', 'Spiritual', 'Other']
      },
      'q2_22_25_1': {
        text: 'What doubts emerged?',
        answers: ['Compatibility', 'Timing', 'Feelings', 'Values', 'Other']
      },
      'q2_22_25_2': {
        text: 'How physical was the experience?',
        answers: ['Highly physical', 'Mostly', 'Balanced', 'Minimal', 'Other']
      },
      'q2_22_25_3': {
        text: 'What was eye-opening?',
        answers: ['Self-awareness', 'Partner insight', 'Communication', 'Consent', 'Other']
      },
      'q2_22_25_4': {
        text: 'Why no change in views?',
        answers: ['Already open', 'Unmoved', 'Other priorities', 'Other', 'None']
      },
      'q2_above25_0': {
        text: 'What curiosity drove you?',
        answers: ['Personal', 'Peer stories', 'Media', 'Partner interest', 'Other']
      },
      'q2_above25_1': {
        text: 'Was love the primary motivator?',
        answers: ['Yes', 'Somewhat', 'No', 'Mixed', 'Other']
      },
      'q2_above25_2': {
        text: 'Did career focus delay you?',
        answers: ['Yes', 'No', 'Partially', 'Unsure', 'Other']
      },
      'q2_above25_3': {
        text: 'Which cultural reason applied?',
        answers: ['Family values', 'Religion', 'Tradition', 'Other', 'None']
      },
      'q2_above25_4': {
        text: 'Please specify other reasons:',
        answers: ['Personal choice', 'Privacy', 'Waiting for right', 'Other', 'Prefer not to say']
      }
    };

    function render() {
      if (state.stage === 'q1') return renderQ1();
      if (state.stage === 'q2') return renderQ2();
      if (state.stage === 'q3') return renderQ3();
      container.innerHTML = `<div class="question">Thank you for your honesty ❤️</div>`;
    }

    function renderQ1() {
      container.innerHTML = `
        <div class="question">Select your age when you first had sex:</div>
        <div class="input-block">
          <input type="range" id="age-slider" min="14" max="60" value="18" oninput="updateAge(this.value)">
          <div class="range-label" id="range-label">18 years</div>
        </div>
        <button class="answer-btn" onclick="submitAge()">Continue</button>
      `;
    }

    function updateAge(val) {
      state.age = parseInt(val);
      document.getElementById('range-label').innerText = val + ' years';
    }

    function submitAge() {
      const age = state.age;
      if (age < 14) return; // slider prevents
      if (age <= 17) state.branch = 'q2_14_17';
      else if (age <= 21) state.branch = 'q2_18_21';
      else if (age <= 25) state.branch = 'q2_22_25';
      else state.branch = 'q2_above25';
      state.stage = 'q2';
      render();
    }

    function renderQ2() {
      const q = q2Data[state.branch];
      container.innerHTML = `
        <div class="question">${q.text}</div>
        <div class="answers">
          ${q.answers.map((a,i) => `<button class="answer-btn" onclick="pickQ2(${i})">${a}</button>`).join('')}
        </div>
      `;
    }

    function pickQ2(idx) {
      state.choiceIndex = idx;
      state.stage = 'q3';
      render();
    }

    function renderQ3() {
      const key = `${state.branch}_${state.choiceIndex}`;
      const entry = q3Data[key];
      container.innerHTML = `
        <div class="question">${entry.text}</div>
        <div class="answers">
          ${entry.answers.map((a,i) => `<button class="answer-btn" onclick="finish()">${a}</button>`).join('')}
        </div>
      `;
    }

    function finish() {
      state.stage = 'end';
      render();
    }

    render();
  </script>
</body>
</html>
