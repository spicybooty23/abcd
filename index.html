<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Spicy Confession Scale</title>
  <style>
    body {
      background: radial-gradient(circle at top left, #2c001e, #000);
      color: #fff;
      font-family: 'Segoe UI', sans-serif;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      margin: 0;
    }
    .container {
      width: 90%;
      max-width: 600px;
      padding: 2rem;
      background: rgba(27,27,27,0.95);
      border-radius: 25px;
      box-shadow: 0 0 35px #ff1493aa;
      backdrop-filter: blur(6px);
      overflow-y: auto;
      max-height: 90vh;
    }
    .question {
      margin-bottom: 1.5rem;
      font-size: 1.4rem;
      animation: fadeIn 0.8s ease-out;
    }
    .answers, .input-block {
      display: flex;
      flex-direction: column;
      gap: 1rem;
    }
    button, input[type=range] {
      font-size: 1rem;
      border-radius: 12px;
      border: none;
      outline: none;
      padding: 0.9rem;
    }
    .answer-btn {
      background: linear-gradient(to right, #ff0066, #ff3399);
      color: white;
      cursor: pointer;
      box-shadow: 0 0 10px #ff3399aa;
      transition: all 0.3s ease;
    }
    .answer-btn:hover {
      background: #ff66cc;
      box-shadow: 0 0 18px #ff66cc;
      transform: scale(1.05);
    }
    .range-label {
      text-align: center;
      font-size: 1.2rem;
      color: #ff66cc;
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
  </style>
</head>
<body>
  <div class="container" id="quiz-container"></div>

  <script>
    // Question trees
    const q2Data = {
      q2_1: { text: 'At that age (<14), which best describes your feeling?', answers: ['Pressured', 'Curious', 'Misled', 'Excited', 'Confused'] },
      q2_2: { text: 'At 14‚Äì17, who was your partner?', answers: ['Friend', 'Older person', 'New crush', 'Casual fling', 'Stranger'] },
      q2_3: { text: 'At 18‚Äì21, was it planned or spontaneous?', answers: ['Fully planned', 'Mostly planned', 'Spontaneous', 'Chance encounter', 'Don‚Äôt recall'] },
      q2_4: { text: 'At 22‚Äì25, how did it make you feel afterwards?', answers: ['Empowered', 'Regretful', 'Indifferent', 'Joyful', 'Ashamed'] },
      q2_5: { text: 'Above 25, what drove the decision?', answers: ['Curiosity', 'Love', 'Desire', 'Loneliness', 'Peer influence'] }
    };
    const q3Template = ['It changed me', 'I needed space', 'I felt alive', 'I felt ashamed', 'I would repeat'];

    // State
    let state = { stage: 'q1', age: null, branch: null, branchAnswer: null };
    const container = document.getElementById('quiz-container');

    // Render dispatcher
    function render() {
      if (state.stage === 'q1') return renderQ1();
      if (state.stage.startsWith('q2_')) return renderQ2(state.stage);
      if (state.stage.startsWith('q3_')) return renderQ3();
      container.innerHTML = `<div class="question">Thank you for your honesty, Emilyanes‚Äôa üíã</div>`;
    }

    // Q1: Age slider
    function renderQ1() {
      container.innerHTML = `
        <div class="question">At what age did you first have sex?</div>
        <div class="input-block">
          <input type="range" id="age-slider" min="10" max="60" value="18" oninput="updateAge(this.value)">
          <div class="range-label" id="range-label">18 years</div>
        </div>
        <button class="answer-btn" onclick="submitAge()">Submit Age</button>
      `;
    }

    function updateAge(val) {
      state.age = parseInt(val);
      document.getElementById('range-label').innerText = val + ' years';
    }

    function submitAge() {
      const age = state.age || 18;
      let key;
      if (age < 14) key = 'q2_1';
      else if (age <= 17) key = 'q2_2';
      else if (age <= 21) key = 'q2_3';
      else if (age <= 25) key = 'q2_4';
      else key = 'q2_5';
      state.stage = key;
      state.branch = key;
      render();
    }

    // Q2: category-specific MCQ
    function renderQ2(key) {
      const q = q2Data[key];
      container.innerHTML = `
        <div class="question">${q.text}</div>
        <div class="answers">
          ${q.answers.map((a,i) => `<button class="answer-btn" onclick="chooseQ2(${i})">${a}</button>`).join('')}
        </div>
      `;
    }

    function chooseQ2(index) {
      state.branchAnswer = q2Data[state.branch].answers[index];
      state.stage = `q3`;
      state.subIndex = index;
      render();
    }

    // Q3: follow-up based on Q2 choice
    function renderQ3() {
      const text = `You chose ‚Äú${state.branchAnswer}‚Äù. How did that choice influence you?`;
      container.innerHTML = `
        <div class="question">${text}</div>
        <div class="answers">
          ${q3Template.map((a,i) => `<button class="answer-btn" onclick="finish()">${a}</button>`).join('')}
        </div>
      `;
    }

    function finish() {
      state.stage = 'end';
      render();
    }

    // Start
    state.age = 18;
    render();
  </script>
</body>
</html>
